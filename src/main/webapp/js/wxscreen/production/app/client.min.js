!function (t) {
    var i = t.parent;
    if (i && window !== top) {
        var e = t.APP = {_evtList: {}};
        e.init = function () {
            if (this.urlParams = this.parseUrlParam(), this.id = this.urlParams.id ? this.urlParams.id : null, this.conf = this.proxy("getConf", [this.id]), this.conf) {
                var t = this.proxy("getConf", ["keyCodeMap"], "wxscreen");
                this.keyCode = t[this.conf.shortcut], this.bindEvent(), this.proxy("ready", [this.id])
            }
        }, e.bindEvent = function () {
            $(window).on("keydown", function (t) {
                t.keyCode == e.keyCode && e.toggleDisplay()
            })
        }, e.toggleDisplay = function () {
            this.proxy("pub", ["key." + this.keyCode + ".down"], "wxscreen")
        }, e.proxy = function (t, e, n) {
            var s;
            switch (n = n || "app") {
                case"app":
                    "function" == typeof i.wxscreen.app[t] && (s = i.wxscreen.app[t].apply(i.wxscreen.app, e));
                    break;
                case"wxscreen":
                    "function" == typeof i.wxscreen[t] && (s = i.wxscreen[t].apply(i.wxscreen, e));
                    break;
                case"window":
                    "function" == typeof i[t] && (s = i[t].apply(i, e))
            }
            return s
        }, e.on = function (t, i) {
            if ("function" != typeof i)return !1;
            this._evtList[t] || (this._evtList[t] = []);
            for (var e = !1, n = 0; n < this._evtList[t].length; n++)if (this._evtList[t][n] === i) {
                e = !0;
                break
            }
            return e ? !1 : (this._evtList[t].push(i), void 0)
        }, e.off = function (t, i) {
            if (this._evtList[t])if (i) {
                for (var e = 0; e < this._evtList[t].length; e++)if (this._evtList[t][e] === i) {
                    this._evtList[t].splice(e, 1);
                    break
                }
            } else this._evtList[t] = null;
            return !0
        }, e.trigger = function (t, i) {
            var e = this._evtList[t];
            if (e)for (var n, s = 0; s < e.length && (n = e[s](t, i), !1 !== n); s++);
        }, e.parseUrlParam = function () {
            var t = {}, i = location.search.replace("?", "");
            if (!i)return t;
            for (var e, n = i.split("&"), s = 0; s < n.length; s++)e = n[s].split("="), t[e[0]] = e[1];
            return t
        }, $(function () {
            e.init()
        })
    }
}(window);